Search.setIndex({"docnames": ["intro", "notebooks/basic-demo"], "filenames": ["intro.md", "notebooks/basic-demo.md"], "titles": ["OpenSCM-Calibration Examples", "Basic demo"], "terms": {"thi": [0, 1], "small": 0, "book": 0, "which": [0, 1], "show": [0, 1], "sometim": [0, 1], "long": [0, 1], "run": 0, "us": [0, 1], "basic": 0, "demo": 0, "document": 0, "modifi": 0, "method": [0, 1], "time": [0, 1], "s": [0, 1], "statu": [0, 1], "2024": 0, "05": 0, "08": 0, "00": [0, 1], "22": 0, "cach": 0, "1313": 0, "33": 0, "here": 1, "we": 1, "give": 1, "how": 1, "work": 1, "openscm": 1, "calibr": 1, "howev": 1, "enough": 1, "result": 1, "ar": 1, "meaning": 1, "interest": 1, "from": 1, "functool": 1, "partial": 1, "type": 1, "callabl": 1, "dict": 1, "tupl": 1, "emce": 1, "matplotlib": 1, "pyplot": 1, "plt": 1, "more_itertool": 1, "numpi": 1, "np": 1, "test": 1, "npt": 1, "panda": 1, "pd": 1, "pint": 1, "scipi": 1, "integr": 1, "scmdata": 1, "emcwrap": 1, "dimemov": 1, "multiprocess": 1, "pool": 1, "manag": 1, "openscm_unit": 1, "unit_registri": 1, "ureg": 1, "tqdm": 1, "notebook": 1, "openscm_calibr": 1, "emcee_plot": 1, "optcostcalculatorss": 1, "emcee_util": 1, "get_acceptance_fract": 1, "get_autocorrelation_info": 1, "minim": 1, "to_minimize_ful": 1, "model_runn": 1, "optmodelrunn": 1, "scipy_plot": 1, "callbackproxi": 1, "optplott": 1, "get_ymax_default": 1, "scmdata_util": 1, "scmrun_as_dict": 1, "store": 1, "optresstor": 1, "home": 1, "calibration_exampl": 1, "venv": 1, "lib": 1, "python3": 1, "9": 1, "site": 1, "packag": 1, "databas": 1, "_databas": 1, "py": 1, "tqdmexperimentalwarn": 1, "autonotebook": 1, "mode": 1, "instead": 1, "forc": 1, "consol": 1, "e": 1, "g": 1, "jupyt": 1, "tqdman": 1, "print": 1, "f": 1, "__version__": 1, "0": 1, "5": 1, "In": 1, "go": 1, "simpl": 1, "solv": 1, "follow": 1, "equat": 1, "motion": 1, "mass": 1, "damp": 1, "spring": 1, "begin": 1, "align": 1, "v": 1, "frac": 1, "dx": 1, "dt": 1, "m": 1, "dv": 1, "k": 1, "x": 1, "x_0": 1, "beta": 1, "end": 1, "where": 1, "veloc": 1, "posit": 1, "t": 1, "constant": 1, "equilibrium": 1, "system": 1, "initi": 1, "valu": 1, "problem": 1, "want": 1, "support": 1, "unit": 1, "so": 1, "implement": 1, "respons": 1, "two": 1, "start": 1, "out": 1, "alreadi": 1, "move": 1, "length_unit": 1, "mass_unit": 1, "pt": 1, "time_unit": 1, "yr": 1, "time_axi": 1, "quantiti": 1, "arang": 1, "1850": 1, "2000": 1, "1": 1, "100": 1, "def": 1, "do_experiments_ful": 1, "x_zero": 1, "basescmrun": 1, "paramet": 1, "kg": 1, "2": 1, "return": 1, "avoid": 1, "convers": 1, "function": 1, "actual": 1, "being": 1, "make": 1, "thing": 1, "much": 1, "faster": 1, "also": 1, "harder": 1, "keep": 1, "track": 1, "recommend": 1, "everywher": 1, "first": 1, "second": 1, "either": 1, "via": 1, "throughout": 1, "option": 1, "wrap": 1, "fortran": 1, "c": 1, "wrapper": 1, "k_m": 1, "x_zero_m": 1, "beta_m": 1, "m_m": 1, "to_solv": 1, "ndarrai": 1, "y": 1, "right": 1, "hand": 1, "side": 1, "our": 1, "i": 1, "dn": 1, "current": 1, "stat": 1, "dv_dt": 1, "dx_dt": 1, "arrai": 1, "time_axis_m": 1, "name": 1, "to_solve_l": 1, "x_start": 1, "v_start": 1, "non": 1, "eqm": 1, "3": 1, "solve_ivp": 1, "t_span": 1, "y0": 1, "t_eval": 1, "success": 1, "rais": 1, "valueerror": 1, "fail": 1, "datafram": 1, "vstack": 1, "index": 1, "multiindex": 1, "from_arrai": 1, "variabl": 1, "scenario": 1, "column": 1, "exampl": 1, "do_experi": 1, "For": 1, "known": 1, "configur": 1, "can": 1, "sure": 1, "spot": 1, "practic": 1, "won": 1, "know": 1, "correct": 1, "answer": 1, "befor": 1, "gener": 1, "look": 1, "bit": 1, "differ": 1, "typic": 1, "would": 1, "load": 1, "data": 1, "some": 1, "other": 1, "sourc": 1, "truth": 1, "3000": 1, "1e11": 1, "lineplot": 1, "year": 1, "month": 1, "79": 1, "futurewarn": 1, "The": 1, "ci": 1, "deprec": 1, "errorbar": 1, "sd": 1, "same": 1, "effect": 1, "ax": 1, "sn": 1, "plt_df": 1, "kwarg": 1, "timeseri": 1, "timepoint": 1, "150": 1, "01": 1, "01t00": 1, "1999": 1, "meta": 1, "next": 1, "decid": 1, "There": 1, "mani": 1, "case": 1, "sum": 1, "squar": 1, "error": 1, "normalis": 1, "seri": 1, "cost_calcul": 1, "from_series_normalis": 1, "normalisation_seri": 1, "model_col": 1, "assert": 1, "calculate_cost": 1, "doe": 1, "everyth": 1, "convert": 1, "them": 1, "firstli": 1, "defin": 1, "ensur": 1, "consist": 1, "order": 1, "given": 1, "input": 1, "need": 1, "veri": 1, "flexibl": 1, "help": 1, "do_model_runs_input_gener": 1, "str": 1, "creat": 1, "func": 1, "from_paramet": 1, "param": 1, "do_model_run": 1, "convert_x_to_names_with_unit": 1, "x_and_parameters_to_named_with_unit": 1, "0x7f72897f4ee0": 1, "0x7f72885fc790": 1, "0x7f728980a280": 1, "petametric_ton": 1, "now": 1, "plain": 1, "like": 1, "get": 1, "understood": 1, "run_model": 1, "7": 1, "48082272283305": 1, "readi": 1, "ha": 1, "do": 1, "differenti": 1, "evolut": 1, "equal": 1, "have": 1, "4": 1, "6": 1, "must": 1, "bound": 1, "each": 1, "bounds_dict": 1, "300": 1, "1e4": 1, "1e10": 1, "1e12": 1, "displai": 1, "kilogram": 1, "10000": 1, "meter": 1, "10000000000": 1, "1000000000000": 1, "298764635328": 1, "9588211776": 1, "315576": 1, "31": 1, "557600000000004": 1, "number": 1, "parallel": 1, "process": 1, "random": 1, "seed": 1, "you": 1, "reproduc": 1, "374839": 1, "toler": 1, "set": 1, "converg": 1, "atol": 1, "tol": 1, "02": 1, "maximum": 1, "iter": 1, "maxit": 1, "50": 1, "lower": 1, "mutat": 1, "mean": 1, "smaller": 1, "search": 1, "radiu": 1, "8": 1, "higher": 1, "recombin": 1, "might": 1, "miss": 1, "minimum": 1, "size": 1, "popul": 1, "more": 1, "slower": 1, "popsiz": 1, "strategi": 1, "init": 1, "max_n_run": 1, "len": 1, "visualis": 1, "update_everi": 1, "thin_ts_to_plot": 1, "could": 1, "part": 1, "factori": 1, "class": 1, "convert_scmrun_to_plot_dict": 1, "group": 1, "cost_nam": 1, "timeseries_ax": 1, "list": 1, "kei": 1, "parameters_nam": 1, "parameters_mosiac": 1, "repeat_each": 1, "timeseries_axes_mosiac": 1, "fig": 1, "axd": 1, "subplot_mosa": 1, "mosaic": 1, "figsiz": 1, "holder": 1, "display_id": 1, "true": 1, "from_n_runs_manag": 1, "object": 1, "to_minim": 1, "known_error": 1, "total": 1, "pbar": 1, "opt_plott": 1, "cost_kei": 1, "proxi": 1, "real_callback": 1, "progress_bar": 1, "last_callback_v": 1, "optimize_r": 1, "optim": 1, "differential_evolut": 1, "x0": 1, "polish": 1, "step": 1, "fals": 1, "worker": 1, "map": 1, "updat": 1, "defer": 1, "callback": 1, "callback_differential_evolut": 1, "close": 1, "fun": 1, "45": 1, "72328578101859": 1, "messag": 1, "termin": 1, "successfulli": 1, "nfev": 1, "168": 1, "nit": 1, "13": 1, "02972562": 1, "46913996": 1, "10801773": 1, "assert_allclos": 1, "030": 1, "469": 1, "108": 1, "rtol": 1, "1e": 1, "nelder": 1, "mead": 1, "again": 1, "greater": 1, "wai": 1, "abov": 1, "too": 1, "start_loc": 1, "think": 1, "lot": 1, "10": 1, "from_n_run": 1, "auto": 1, "figur": 1, "just": 1, "conveni": 1, "previou": 1, "under": 1, "hood": 1, "from_autogenerated_figur": 1, "kwargs_create_mosa": 1, "n_parameters_per_row": 1, "n_timeseries_per_row": 1, "cost_col_relwidth": 1, "kwargs_get_fig_axes_hold": 1, "plot_cost_kwarg": 1, "alpha": 1, "get_ymax": 1, "min_scale_factor": 1, "1e6": 1, "min_v_median_scale_factor": 1, "optimize_res_loc": 1, "callback_minim": 1, "final_simplex": 1, "98764573": 1, "50000399": 1, "15576414": 1, "98764759": 1, "50000064": 1, "15570193": 1, "98763154": 1, "49999956": 1, "15575025": 1, "98764986": 1, "49999085": 1, "15582127": 1, "13150957e": 1, "07": 1, "05891938e": 1, "83189480e": 1, "06": 1, "34335609e": 1, "131509568272215e": 1, "94": 1, "49": 1, "988": 1, "500": 1, "156": 1, "To": 1, "heap": 1, "realli": 1, "user": 1, "friendli": 1, "all": 1, "avail": 1, "sampler": 1, "neg_log_prior_bound": 1, "float": 1, "log": 1, "check": 1, "in_bound": 1, "inf": 1, "neg_log_prior": 1, "neg": 1, "sampl": 1, "neg_log_likelihood_plus_prior_ful": 1, "neg_log_prior_x": 1, "isfinit": 1, "none": 1, "try": 1, "model_result": 1, "except": 1, "ss": 1, "neg_ll_x": 1, "neg_log_likelihood_plus_prior": 1, "posterior": 1, "often": 1, "most": 1, "difficult": 1, "choic": 1, "dime": 1, "claim": 1, "an": 1, "adapt": 1, "distribut": 1, "requir": 1, "less": 1, "fine": 1, "tune": 1, "sensit": 1, "point": 1, "ndim": 1, "doc": 1, "suggest": 1, "nwalker": 1, "start_emce": 1, "rand": 1, "chain": 1, "hdf5": 1, "backend": 1, "save": 1, "disk": 1, "let": 1, "halfwai": 1, "through": 1, "filenam": 1, "h5": 1, "hdfbackend": 1, "reset": 1, "485765": 1, "unclear": 1, "appropri": 1, "normal": 1, "longer": 1, "about": 1, "toi": 1, "max_iter": 1, "900": 1, "burnin": 1, "thin": 1, "15": 1, "plot_everi": 1, "convergence_ratio": 1, "parameter_ord": 1, "p": 1, "neg_log_likelihood_nam": 1, "neg_ll": 1, "labels_chain": 1, "autocorr": 1, "over": 1, "zero": 1, "autocorr_step": 1, "fig_chain": 1, "axd_chain": 1, "l": 1, "holder_chain": 1, "fig_dist": 1, "axd_dist": 1, "holder_dist": 1, "fig_corn": 1, "holder_corn": 1, "fig_tau": 1, "ax_tau": 1, "subplot": 1, "nrow": 1, "ncol": 1, "holder_tau": 1, "plott": 1, "helper": 1, "truths_corn": 1, "u": 1, "ensemblesampl": 1, "blobs_dtyp": 1, "neg_log_likelihood": 1, "If": 1, "statement": 1, "continu": 1, "rather": 1, "than": 1, "fresh": 1, "els": 1, "get_last_sampl": 1, "progress": 1, "progress_kwarg": 1, "leav": 1, "in_burn_in": 1, "clear": 1, "plot_chain": 1, "inp": 1, "axes_d": 1, "tight_layout": 1, "chain_post_burnin": 1, "get_chain": 1, "discard": 1, "shape": 1, "acceptance_fract": 1, "post": 1, "accept": 1, "fraction": 1, "plot_dist": 1, "warn_singular": 1, "plot_corn": 1, "assertionerror": 1, "pass": 1, "autocorr_bit": 1, "autocorr_tol": 1, "isnan": 1, "autocorrel": 1, "pretti": 1, "specif": 1, "haven": 1, "separ": 1, "axlin": 1, "slope": 1, "color": 1, "linestyl": 1, "set_ylabel": 1, "tau": 1, "set_xlabel": 1, "_": 1, "rang": 1, "3551020408163265": 1, "36835016835016826": 1, "91": 1, "runtimewarn": 1, "divid": 1, "encount": 1, "self": 1, "nchain": 1, "36152125279642067": 1, "200": 1, "37755443886097156": 1, "250": 1, "37991967871485943": 1, "37859531772575256": 1, "350": 1, "3768863419293219": 1, "400": 1, "3767752715121136": 1, "450": 1, "37624350408314783": 1, "3771543086172345": 1, "550": 1, "37656344869459624": 1, "600": 1, "37417918753478024": 1, "650": 1, "3721623009758603": 1, "700": 1, "3729136862184072": 1, "750": 1, "3740097908322208": 1, "800": 1, "371964956195244": 1, "nice": 1, "although": 1, "cours": 1, "exact": 1, "scienc": 1, "after": 1, "finish": 1, "even": 1, "while": 1, "read": 1, "wrong": 1, "rare": 1, "dfm": 1, "395": 1, "been": 1, "merg": 1, "cell": 1, "below": 1, "standalon": 1, "reader": 1, "12": 1, "your": 1, "new": 1, "pr": 1, "per": 1, "flat": 1, "steps_post_burnin": 1, "66": 1, "990": 1, "536": 1, "25679061359": 1, "underconstrain": 1, "constrain": 1, "see": 1, "appear": 1, "Such": 1, "caus": 1, "issu": 1, "good": 1, "fit": 1, "found": 1, "someth": 1, "mind": 1, "reason": 1, "should": 1, "becaus": 1, "reveal": 1, "alon": 1, "truth_incl_mass": 1, "120": 1, "target_incl_mass": 1, "parameters_incl_mass": 1, "parameter_order_incl_mass": 1, "do_model_runs_input_generator_incl_mass": 1, "model_runner_incl_mass": 1, "bounds_dict_incl_mass": 1, "1000": 1, "dictionari": 1, "bounds_incl_mass": 1, "neg_log_prior_incl_mass": 1, "neg_log_likelihood_plus_prior_incl_mass": 1, "ndim_incl_mass": 1, "nwalkers_incl_mass": 1, "start_emcee_incl_mass": 1, "20": 1, "move_incl_mass": 1, "filename_incl_mass": 1, "mcmc_incl": 1, "backend_incl_mass": 1, "100000000000": 1, "0x7f727d11bd30": 1, "5478": 1, "551430424355": 1, "labels_chain_incl_mass": 1, "fig_chain_incl_mass": 1, "axd_chain_incl_mass": 1, "holder_chain_incl_mass": 1, "fig_dist_incl_mass": 1, "axd_dist_incl_mass": 1, "holder_dist_incl_mass": 1, "fig_corner_incl_mass": 1, "holder_corner_incl_mass": 1, "fig_tau_incl_mass": 1, "ax_tau_incl_mass": 1, "holder_tau_incl_mass": 1, "truths_corner_incl_mass": 1, "2510204081632653": 1, "27676767676767683": 1, "27449664429530196": 1, "27839195979899495": 1, "2809236947791165": 1, "2777591973244148": 1, "2756446991404012": 1, "2768170426065163": 1, "2755011135857461": 1, "2762525050100201": 1, "2760473588342441": 1, "27879799666110183": 1, "27919876733436055": 1, "2753934191702432": 1, "2734312416555408": 1, "2722778473091364": 1, "thank": 1, "between": 1, "obviou": 1, "don": 1, "inform": 1, "up": 1, "probabl": 1, "peak": 1, "uncertainti": 1, "larg": 1, "thei": 1, "hit": 1, "against": 1, "anywher": 1, "care": 1, "interpret": 1, "As": 1, "insid": 1, "isn": 1, "sign": 1, "plan": 1}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"openscm": 0, "calibr": 0, "exampl": 0, "avail": 0, "notebook": 0, "execut": 0, "info": 0, "basic": 1, "demo": 1, "import": 1, "background": 1, "experi": 1, "target": 1, "cost": 1, "calcul": 1, "model": 1, "runner": 1, "global": 1, "optimis": 1, "local": 1, "mcmc": 1, "prior": 1, "likelihood": 1, "propos": 1, "run": 1, "plot": 1, "live": 1, "ad": 1, "degeneraci": 1, "setup": 1, "re": 1}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx": 56}})